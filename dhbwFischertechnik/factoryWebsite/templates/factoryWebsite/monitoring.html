{% extends 'factoryWebsite/main.html' %}
{% load static %}
{% block content %}
<h1>Sortierstra√üe</h1>
<table class="table text-center">
    <tr>
    <td>
        <label>Farbsensor ==> </label><br>
    </td>
    <td>
        <label id="color-sensor">Keine Daten</label><br>
    </td>
    </tr>
    <tr>
    <td>
        <label>Temperatursensor ==> </label><br>
    </td>
    <td>
        <label id="temperature-sorting-sensor">Keine Daten</label><br>
    </td>
    </tr>
    <tr>
    <td>
        <label>Spannungsensor ==> </label><br>
    </td>
    <td>
        <label id="voltage-sorting-sensor">Keine Daten</label><br>
    </td>
    </tr>
</table>

<h1>Hochregallager</h1>
<table class="table text-center">
    <tr>
    <td>
        <label>Temperatursensor ==> </label><br>
    </td>
    <td>
        <label id="temperature-main-sensor">Keine Daten</label><br>
    </td>
    </tr>
    <tr>
    <td>
        <label>Spannungsensor ==> </label><br>
    </td>
    <td>
        <label id="voltage-main-sensor">Keine Daten</label><br>
    </td>
    </tr>
</table>

<script type="text/javascript">
    document.getElementById('cart-symbol').classList.add("hidden");

    const chatSocket = new WebSocket(
        'ws://'
        + window.location.host
        + '/ws/monitoring/'
    );

    chatSocket.onmessage = function(e) {
        const data = JSON.parse(e.data);
        document.querySelector('#color-sensor').innerHTML = (data.colorSortingLine);
        document.querySelector('#temperature-sorting-sensor').innerHTML = (data.temperatureSortingLine);
        document.querySelector('#voltage-sorting-sensor').innerHTML = (data.voltageSortingLine);
        document.querySelector('#temperature-main-sensor').innerHTML = (data.temperatureMainUnit);
        document.querySelector('#voltage-main-sensor').innerHTML = (data.voltageMainUnit);
    };

    chatSocket.onclose = function(e) {
        console.error('Chat socket closed unexpectedly');
    };
</script>

{% endblock content %}